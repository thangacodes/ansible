pipeline {
    agent any
	environment {
	     SECRET_VALUE = credentials('jenkins-aws-creds')
	}
    stages {
        stage('Ansible Version Checking') {
            steps {
                sh '''
                   echo 'Starts checking ansible'
                   ansible --version
                   ansible-playbook --version
                   ansible-galaxy --version
		   aws --version
		   aws s3 ls
		   aws configure get region
                   aws ec2 describe-instances --region ap-south-1
		   aws ec2 describe-instances  \
                   --query "Reservations[*].Instances[*].{PublicIP:PublicIpAddress,Name:Tags[?Key=='Name']|[0].Value,Status:State.Name}" \
                   --filters Name=instance-state-name,
                '''
            }
        }
    }
}
