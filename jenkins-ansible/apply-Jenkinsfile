pipeline {
    agent any
	environment {
	     SECRET_VALUE = credentials('jenkins-aws-creds')
	}
    stages {
        stage('Ansible Version Checking') {
            steps {
                sh '''
                   echo 'Starts checking ansible'
                   ansible --version
                   ansible-playbook --version
                   ansible-galaxy --version
		   aws --version
		   aws s3 ls
                   aws ec2 describe-instances --region ap-south-1
                   echo "Going to create a NEW S3 bucket"
	           ansible-playbook playbooks/create-s3-bucket.yaml
                '''
            }
        }
    }
}
